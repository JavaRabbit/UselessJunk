<h2>Your Cart</h2>

<p>All Orders: <%= Order.all.inspect %></p>
<p> This Order: <%= @order.inspect %> </p>
<p> Total Cost: <%#= @order.total_price %> </p>

<p>Errors</p>
<ul class = "errors">
  <% @order.order_items.each do |item| %>
      <% item.errors.each do |column, message| %>
        <li>
          <strong><%= column.capitalize %></strong> <%= message %>
        </li>
      <% end %>
  <% end %>
</ul>


<% @order.order_items.sort.each do |item| %>
  <%= form_for item, method: :patch, url: update_cart_path do |f| %>
    <p>Order Items for this order</p>
      <p><strong><%= item.product.name %></strong></p>
      <p> <%= f.text_field item.id, value: item.quantity_of_product %> x <%= item.product.price %></p>
      <p> Quantity available: <%= item.product.quantity %></p>
      <ul class = "errors" >
        <% item.errors.inspect %>
        <% item.errors.each do |column, message| %>
        <li>
          <strong> <%= message %>
        </li>
        <% end %>
      </ul>
      <p> Subtotal: <%= item.subtotal %> </p>
      <%= f.submit "Update Cart" %>
    <% end %>

<% end %>

<!-- # <%= button_to "Update Cart", edit_order_path(@order.id), method: :patch %> -->
<%= button_to "Buy the things!!", edit_order_path(@order.id), method: :patch %>
